{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, withModifiers as _withModifiers, withKeys as _withKeys, createTextVNode as _createTextVNode, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chat-container\",\n  style: {\n    \"width\": \"1000px\",\n    \"height\": \"600px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"chat-box\"\n};\nconst _hoisted_3 = {\n  class: \"model-switch\"\n};\nconst _hoisted_4 = {\n  class: \"messages\",\n  ref: \"messageContainer\"\n};\nconst _hoisted_5 = {\n  class: \"message-content\"\n};\nconst _hoisted_6 = {\n  class: \"input-area\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_switch, {\n    modelValue: $setup.isReasonerModel,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.isReasonerModel = $event),\n    \"active-text\": \"推理模型\",\n    \"inactive-text\": \"聊天模型\",\n    onChange: $setup.handleModelChange\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onChange\"])]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, (message, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['message', message.role === 'user' ? 'user-message' : 'ai-message'])\n    }, [_createVNode(_component_el_avatar, {\n      icon: message.role === 'user' ? $setup.UserFilled : $setup.Service,\n      class: _normalizeClass(message.role === 'user' ? 'user-avatar' : 'ai-avatar')\n    }, null, 8 /* PROPS */, [\"icon\", \"class\"]), _createElementVNode(\"div\", _hoisted_5, _toDisplayString(message.content), 1 /* TEXT */)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_input, {\n    modelValue: $setup.userInput,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.userInput = $event),\n    type: \"textarea\",\n    rows: 3,\n    placeholder: \"请输入您的问题...\",\n    onKeyup: _withKeys(_withModifiers($setup.sendMessage, [\"ctrl\"]), [\"enter\"])\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    loading: $setup.loading,\n    onClick: $setup.sendMessage\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 发送 (Ctrl + Enter) \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"loading\", \"onClick\"])])])]);\n}","map":{"version":3,"names":["class","style","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_switch","modelValue","$setup","isReasonerModel","_cache","$event","onChange","handleModelChange","_hoisted_4","_Fragment","_renderList","messages","message","index","key","_normalizeClass","role","_component_el_avatar","icon","UserFilled","Service","_hoisted_5","_toDisplayString","content","_hoisted_6","_component_el_input","userInput","type","rows","placeholder","onKeyup","_withKeys","_withModifiers","sendMessage","_component_el_button","loading","onClick","default","_withCtx","_createTextVNode","_"],"sources":["D:\\nodejs_vue_project\\SpringBootVue\\vue\\src\\views\\Chat.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-container\" style=\"width: 1000px;height: 600px\">\r\n    <div class=\"chat-box\">\r\n      <div class=\"model-switch\">\r\n        <el-switch\r\n            v-model=\"isReasonerModel\"\r\n            active-text=\"推理模型\"\r\n            inactive-text=\"聊天模型\"\r\n            @change=\"handleModelChange\"\r\n        />\r\n      </div>\r\n      <div class=\"messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\"\r\n             :class=\"['message', message.role === 'user' ? 'user-message' : 'ai-message']\">\r\n          <el-avatar :icon=\"message.role === 'user' ? UserFilled : Service\"\r\n                     :class=\"message.role === 'user' ? 'user-avatar' : 'ai-avatar'\" />\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"input-area\">\r\n        <el-input\r\n            v-model=\"userInput\"\r\n            type=\"textarea\"\r\n            :rows=\"3\"\r\n            placeholder=\"请输入您的问题...\"\r\n            @keyup.enter.ctrl=\"sendMessage\"\r\n        />\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"sendMessage\">\r\n          发送 (Ctrl + Enter)\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, nextTick } from 'vue';\r\nimport { UserFilled, Service } from '@element-plus/icons-vue';\r\nimport main from \"@/api/DeepSeekApi\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default {\r\n  name: 'Chat',\r\n  setup() {\r\n    const messages = ref([]);\r\n    const userInput = ref('');\r\n    const loading = ref(false);\r\n    const messageContainer = ref(null);\r\n    const isReasonerModel = ref(false);\r\n\r\n    const handleModelChange = () => {\r\n      messages.value.push({\r\n        role: 'assistant',\r\n        content: `已切换至${isReasonerModel.value ? '推理' : '聊天'}模型`\r\n      });\r\n    };\r\n\r\n    const scrollToBottom = async () => {\r\n      await nextTick();\r\n      const container = messageContainer.value;\r\n      if (container) {\r\n        container.scrollTop = container.scrollHeight;\r\n      }\r\n    };\r\n\r\n    const sendMessage = async () => {\r\n      if (!userInput.value.trim() || loading.value) return;\r\n\r\n      const currentInput = userInput.value.trim();\r\n      // 添加用户消息\r\n      messages.value.push({\r\n        role: 'user',\r\n        content: currentInput\r\n      });\r\n\r\n      loading.value = true;\r\n      try {\r\n        userInput.value = '';\r\n        // 调用 API，传入当前选择的模型\r\n        const modelName = isReasonerModel.value ? 'deepseek-reasoner' : 'deepseek-chat';\r\n        const response = await main(currentInput, modelName);\r\n\r\n        // 添加 AI 回复\r\n        messages.value.push({\r\n          role: 'assistant',\r\n          content: response\r\n        });\r\n\r\n        await scrollToBottom();\r\n      } catch (error) {\r\n        console.error('发送消息失败:', error);\r\n        ElMessage.error('发送消息失败，请重试');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      // 添加欢迎消息\r\n      messages.value.push({\r\n        role: 'assistant',\r\n        content: '你好！我是雷军，有什么我可以帮你的吗？'\r\n      });\r\n    });\r\n\r\n    return {\r\n      messages,\r\n      userInput,\r\n      loading,\r\n      messageContainer,\r\n      scrollToBottom,\r\n      sendMessage,\r\n      UserFilled,\r\n      Service,\r\n      isReasonerModel,\r\n      handleModelChange\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  height: calc(100vh - 80px);\r\n}\r\n\r\n.chat-box {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n}\r\n\r\n.message {\r\n  display: flex;\r\n  margin-bottom: 20px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.user-message {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-content {\r\n  margin: 0 12px;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  max-width: 70%;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n.ai-message .message-content {\r\n  background-color: #f4f4f5;\r\n  color: #333;\r\n}\r\n\r\n.input-area {\r\n  padding: 20px;\r\n  border-top: 1px solid #dcdfe6;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.input-area .el-textarea {\r\n  flex: 1;\r\n}\r\n\r\n.user-avatar {\r\n  background-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n.ai-avatar {\r\n  background-color: #67c23a;\r\n  color: white;\r\n}\r\n\r\n.model-switch {\r\n  padding: 10px 20px;\r\n  border-bottom: 1px solid #dcdfe6;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC,gBAAgB;EAACC,KAAmC,EAAnC;IAAA;IAAA;EAAA;;;EACrBD,KAAK,EAAC;AAAU;;EACdA,KAAK,EAAC;AAAc;;EAQpBA,KAAK,EAAC,UAAU;EAACE,GAAG,EAAC;;;EAKjBF,KAAK,EAAC;AAAiB;;EAG3BA,KAAK,EAAC;AAAY;;;;;;uBAlB3BG,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BJC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJD,mBAAA,CAOM,OAPNE,UAOM,GANJC,YAAA,CAKEC,oBAAA;IATVC,UAAA,EAKqBC,MAAA,CAAAC,eAAe;IALpC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKqBH,MAAA,CAAAC,eAAe,GAAAE,MAAA;IACxB,aAAW,EAAC,MAAM;IAClB,eAAa,EAAC,MAAM;IACnBC,QAAM,EAAEJ,MAAA,CAAAK;yDAGfX,mBAAA,CAOM,OAPNY,UAOM,I,kBANJd,mBAAA,CAKMe,SAAA,QAjBdC,WAAA,CAYwCR,MAAA,CAAAS,QAAQ,EAZhD,CAYqBC,OAAO,EAAEC,KAAK;yBAA3BnB,mBAAA,CAKM;MALqCoB,GAAG,EAAED,KAAK;MAC/CtB,KAAK,EAbnBwB,eAAA,aAaiCH,OAAO,CAACI,IAAI;QACnCjB,YAAA,CAC4EkB,oBAAA;MADhEC,IAAI,EAAEN,OAAO,CAACI,IAAI,cAAcd,MAAA,CAAAiB,UAAU,GAAGjB,MAAA,CAAAkB,OAAO;MACpD7B,KAAK,EAf3BwB,eAAA,CAe6BH,OAAO,CAACI,IAAI;gDAC/BpB,mBAAA,CAAwD,OAAxDyB,UAAwD,EAAAC,gBAAA,CAAxBV,OAAO,CAACW,OAAO,iB;0DAGnD3B,mBAAA,CAWM,OAXN4B,UAWM,GAVJzB,YAAA,CAME0B,mBAAA;IA1BVxB,UAAA,EAqBqBC,MAAA,CAAAwB,SAAS;IArB9B,uBAAAtB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAqBqBH,MAAA,CAAAwB,SAAS,GAAArB,MAAA;IAClBsB,IAAI,EAAC,UAAU;IACdC,IAAI,EAAE,CAAC;IACRC,WAAW,EAAC,YAAY;IACvBC,OAAK,EAzBlBC,SAAA,CAAAC,cAAA,CAyB+B9B,MAAA,CAAA+B,WAAW;sDAElClC,YAAA,CAEYmC,oBAAA;IAFDP,IAAI,EAAC,SAAS;IAAEQ,OAAO,EAAEjC,MAAA,CAAAiC,OAAO;IAAGC,OAAK,EAAElC,MAAA,CAAA+B;;IA3B7DI,OAAA,EAAAC,QAAA,CA2B0E,MAElElC,MAAA,QAAAA,MAAA,OA7BRmC,gBAAA,CA2B0E,qBAElE,E;IA7BRC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}